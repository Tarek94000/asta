<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
<section layout:fragment="content">
    <div class="container mt-4">

        <!-- Message de bienvenue -->
        <h2 th:text="'Bonjour ' + ${prenom} + ' ! üëã'"></h2>
        <p class="text-muted mb-4" th:text="'Vous suivez actuellement ' + ${nbApprentis} + ' apprenti(s).'"></p>

        <!-- Tableau des apprentis -->
        <h4>Liste rapide</h4>
        <table class="table table-striped" th:if="${!#lists.isEmpty(apprentis)}">
            <thead class="table-dark">
            <tr>
                <th>Nom</th>
                <th>Pr√©nom</th>
                <th>Entreprise</th>
                <th>Ann√©e</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="a : ${apprentis}">
                <td th:text="${a.nom}"></td>
                <td th:text="${a.prenom}"></td>
                <!-- ‚úÖ Correction : prot√®ge contre les valeurs null -->
                <td th:text="${a.entreprise != null ? a.entreprise.raisonSociale : '‚Äî'}"></td>
                <td th:text="${a.anneeAcademique}"></td>
            </tr>
            </tbody>
        </table>

        <div th:if="${#lists.isEmpty(apprentis)}" class="alert alert-warning">
            Aucun apprenti trouv√©. <a href="/apprentis/add">Ajouter un apprenti</a>.
        </div>

    </div>
</section>
</body>
</html>
